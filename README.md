# Looset Graph

Foldable graphs, a way to abstract ideas and concepts. Try it in [Looset Graph](https://jponline.github.io/looset-graph/).

Also take a look at other similar tools to improve code visualization in [Looset Tools](https://jponline.github.io/looset-landing/).

## Running
Use `shadow-cljs release frontend` to generate releasable js.

Use `shadow-cljs watch frontend` to fire hot reload.

<br>
Note: The NPM module antlr4 was generating buggy .js files, so download the antlr4 module through the command

```bash
npm v antlr4 dist.tarball | xargs curl | tar -xz --directory=packages/ && mv packages/package packages/antlr4
```

## Parser

The parsing code was generated by Antlr following [this instructions](https://github.com/antlr/antlr4/blob/master/doc/javascript-target.md).

Generate Javascript files from the grammar with
`antlr4 -Dlanguage=JavaScript loosetGraph.g4`

To fix errors in the generated javascript code run the following commands
```bash
find . -type f -exec sed -i 's/antlr4\.tree\./antlr4\./g' {} +
find . -type f -exec sed -i 's/antlr4\.atn\./antlr4\./g' {} +
find . -type f -exec sed -i 's/antlr4\.dfa\./antlr4\./g' {} +
find . -type f -exec sed -i 's/antlr4\.error\./antlr4\./g' {} +
```

To delete non relevant files
`find . -type f ! -name '*.js' ! -name '*.g4' -delete`
